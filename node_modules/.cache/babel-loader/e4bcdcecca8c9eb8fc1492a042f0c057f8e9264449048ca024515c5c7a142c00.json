{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'DiagnosticsPage',\n  data() {\n    return {\n      showAdvanced: false,\n      diagnosticData: {}\n    };\n  },\n  computed: {\n    configClientId() {\n      return window.spotifyConfig?.clientId || '';\n    },\n    envClientId() {\n      return process.env.VUE_APP_SPOTIFY_CLIENT_ID || '';\n    },\n    configRedirectUri() {\n      return window.spotifyConfig?.redirectUri || '';\n    },\n    envRedirectUri() {\n      return process.env.VUE_APP_REDIRECT_URI || '';\n    },\n    envClientSecret() {\n      return process.env.VUE_APP_SPOTIFY_CLIENT_SECRET || '';\n    },\n    hasClientId() {\n      return !!this.configClientId || !!this.envClientId;\n    },\n    hasRedirectUri() {\n      return !!this.configRedirectUri || !!this.envRedirectUri;\n    },\n    hasClientSecret() {\n      return !!this.envClientSecret;\n    },\n    clientIdStatus() {\n      return this.hasClientId ? `Found: ${this.clientIdDisplay(this.configClientId || this.envClientId)}` : 'Not found';\n    },\n    redirectUriStatus() {\n      return this.hasRedirectUri ? `Found: ${this.configRedirectUri || this.envRedirectUri}` : 'Not found';\n    },\n    clientSecretStatus() {\n      return this.hasClientSecret ? 'Found (hidden for security)' : 'Not found';\n    },\n    // Check if the client secret is correctly secured\n    isClientSecretSecured() {\n      const clientSecretExposed = document.documentElement.innerHTML.includes(this.envClientSecret);\n      return !clientSecretExposed;\n    },\n    clientIdSource() {\n      if (this.configClientId) return 'config.js';\n      if (this.envClientId) return 'Environment Variable';\n      return 'None';\n    },\n    redirectUriSource() {\n      if (this.configRedirectUri) return 'config.js';\n      if (this.envRedirectUri) return 'Environment Variable';\n      return 'None';\n    }\n  },\n  created() {\n    this.runTests();\n  },\n  methods: {\n    clientIdDisplay(id) {\n      if (!id) return 'Not set';\n      return id.substring(0, 4) + '...' + id.substring(id.length - 4);\n    },\n    goToLogin() {\n      this.$router.push('/login');\n    },\n    runTests() {\n      this.showAdvanced = true;\n      this.diagnosticData = {\n        environment: {\n          nodeEnv: process.env.NODE_ENV,\n          baseUrl: process.env.BASE_URL,\n          window: typeof window !== 'undefined',\n          localStorage: typeof localStorage !== 'undefined'\n        },\n        spotify: {\n          configLoaded: typeof window.spotifyConfig !== 'undefined',\n          configClientId: this.clientIdDisplay(this.configClientId),\n          configClientIdSource: this.clientIdSource,\n          configRedirectUri: this.configRedirectUri,\n          envVarsAvailable: {\n            clientId: !!process.env.VUE_APP_SPOTIFY_CLIENT_ID,\n            clientSecret: !!process.env.VUE_APP_SPOTIFY_CLIENT_SECRET,\n            redirectUri: !!process.env.VUE_APP_REDIRECT_URI\n          }\n        }\n      };\n    }\n  }\n};","map":{"version":3,"names":["name","data","showAdvanced","diagnosticData","computed","configClientId","window","spotifyConfig","clientId","envClientId","process","env","VUE_APP_SPOTIFY_CLIENT_ID","configRedirectUri","redirectUri","envRedirectUri","VUE_APP_REDIRECT_URI","envClientSecret","VUE_APP_SPOTIFY_CLIENT_SECRET","hasClientId","hasRedirectUri","hasClientSecret","clientIdStatus","clientIdDisplay","redirectUriStatus","clientSecretStatus","isClientSecretSecured","clientSecretExposed","document","documentElement","innerHTML","includes","clientIdSource","redirectUriSource","created","runTests","methods","id","substring","length","goToLogin","$router","push","environment","nodeEnv","NODE_ENV","baseUrl","BASE_URL","localStorage","spotify","configLoaded","configClientIdSource","envVarsAvailable","clientSecret"],"sources":["C:\\Users\\menof\\OneDrive\\Desktop\\Now Playing\\now-playing\\src\\components\\DiagnosticsPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"diagnostics-container\">\r\n    <div class=\"diagnostics-card\">\r\n      <h1>Spotify Configuration Diagnostics</h1>\r\n      \r\n      <div class=\"status-block\">\r\n        <h2>Client ID</h2>\r\n        <div class=\"status\" :class=\"{ 'status-ok': hasClientId, 'status-error': !hasClientId }\">\r\n          <i :class=\"hasClientId ? 'fas fa-check-circle' : 'fas fa-times-circle'\"></i>\r\n          <span>{{ clientIdStatus }}</span>\r\n        </div>\r\n        <p class=\"source\" v-if=\"hasClientId\">Source: {{ clientIdSource }}</p>\r\n      </div>\r\n      \r\n      <div class=\"status-block\">\r\n        <h2>Redirect URI</h2>\r\n        <div class=\"status\" :class=\"{ 'status-ok': hasRedirectUri, 'status-error': !hasRedirectUri }\">\r\n          <i :class=\"hasRedirectUri ? 'fas fa-check-circle' : 'fas fa-times-circle'\"></i>\r\n          <span>{{ redirectUriStatus }}</span>\r\n        </div>\r\n        <p class=\"source\" v-if=\"hasRedirectUri\">Source: {{ redirectUriSource }}</p>\r\n      </div>\r\n        <div class=\"status-block\">\r\n        <h2>Client Secret</h2>\r\n        <div class=\"status\" :class=\"{ 'status-ok': hasClientSecret, 'status-error': !hasClientSecret }\">\r\n          <i :class=\"hasClientSecret ? 'fas fa-check-circle' : 'fas fa-times-circle'\"></i>\r\n          <span>{{ clientSecretStatus }}</span>\r\n        </div>\r\n        <p class=\"source\" v-if=\"hasClientSecret\">Source: Environment Variable</p>\r\n      </div>\r\n      \r\n      <div class=\"status-block\">\r\n        <h2>Client Secret Security</h2>\r\n        <div class=\"status\" :class=\"{ 'status-ok': isClientSecretSecured() }\">\r\n          <i :class=\"isClientSecretSecured() ? 'fas fa-check-circle' : 'fas fa-exclamation-triangle'\"></i>\r\n          <span>{{ isClientSecretSecured() ? 'Properly secured' : 'WARNING: Client secret might be exposed!' }}</span>\r\n        </div>\r\n        <p class=\"hint\" v-if=\"!isClientSecretSecured()\">\r\n          Client secrets should never be directly included in client-side code.\r\n          Use a server-side proxy instead.\r\n        </p>\r\n      </div>\r\n      \r\n      <div class=\"solutions\" v-if=\"!hasClientId || !hasRedirectUri || !hasClientSecret\">\r\n        <h2>Possible Solutions</h2>\r\n        <ol>\r\n          <li v-if=\"!hasClientId || !hasRedirectUri\">\r\n            Check that <code>public/config.js</code> has correct values:\r\n            <pre>\r\nwindow.spotifyConfig = {\r\n  clientId: '27aa67e34db74f19a9d8ff298b467189',\r\n  redirectUri: 'http://localhost:8080/callback'\r\n}\r\n            </pre>\r\n          </li>\r\n          <li v-if=\"!hasClientId || !hasRedirectUri || !hasClientSecret\">\r\n            Ensure <code>.env</code> file exists at project root with:\r\n            <pre>\r\nVUE_APP_SPOTIFY_CLIENT_ID=27aa67e34db74f19a9d8ff298b467189\r\nVUE_APP_SPOTIFY_CLIENT_SECRET=03890a7c9f124f818fcd3cf2d8f68269\r\nVUE_APP_REDIRECT_URI=http://localhost:8080/callback\r\n            </pre>\r\n          </li>\r\n          <li>Restart the development server with <code>npm run serve</code></li>\r\n          <li>Clear your browser cache and reload the page</li>\r\n          <li>Make sure <code>index.html</code> loads <code>config.js</code> before the Vue application</li>\r\n        </ol>\r\n      </div>\r\n      \r\n      <div class=\"actions\">\r\n        <button @click=\"goToLogin\" class=\"button\">Return to Login</button>\r\n        <button @click=\"runTests\" class=\"button secondary\">Run Diagnostic Tests</button>\r\n      </div>\r\n      \r\n      <div class=\"advanced\" v-if=\"showAdvanced\">\r\n        <h2>Advanced Diagnostics</h2>\r\n        <pre>{{ JSON.stringify(diagnosticData, null, 2) }}</pre>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'DiagnosticsPage',\r\n  data() {\r\n    return {\r\n      showAdvanced: false,\r\n      diagnosticData: {}\r\n    }\r\n  },\r\n  computed: {\r\n    configClientId() {\r\n      return window.spotifyConfig?.clientId || ''\r\n    },\r\n    envClientId() {\r\n      return process.env.VUE_APP_SPOTIFY_CLIENT_ID || ''\r\n    },\r\n    configRedirectUri() {\r\n      return window.spotifyConfig?.redirectUri || ''\r\n    },\r\n    envRedirectUri() {\r\n      return process.env.VUE_APP_REDIRECT_URI || ''\r\n    },\r\n    envClientSecret() {\r\n      return process.env.VUE_APP_SPOTIFY_CLIENT_SECRET || ''\r\n    },\r\n    hasClientId() {\r\n      return !!this.configClientId || !!this.envClientId\r\n    },\r\n    hasRedirectUri() {\r\n      return !!this.configRedirectUri || !!this.envRedirectUri\r\n    },\r\n    hasClientSecret() {\r\n      return !!this.envClientSecret\r\n    },\r\n    clientIdStatus() {\r\n      return this.hasClientId \r\n        ? `Found: ${this.clientIdDisplay(this.configClientId || this.envClientId)}` \r\n        : 'Not found'\r\n    },\r\n    redirectUriStatus() {\r\n      return this.hasRedirectUri \r\n        ? `Found: ${this.configRedirectUri || this.envRedirectUri}` \r\n        : 'Not found'\r\n    },    clientSecretStatus() {\r\n      return this.hasClientSecret \r\n        ? 'Found (hidden for security)' \r\n        : 'Not found'\r\n    },\r\n    \r\n    // Check if the client secret is correctly secured\r\n    isClientSecretSecured() {\r\n      const clientSecretExposed = document.documentElement.innerHTML.includes(this.envClientSecret);\r\n      return !clientSecretExposed;\r\n    },\r\n    clientIdSource() {\r\n      if (this.configClientId) return 'config.js'\r\n      if (this.envClientId) return 'Environment Variable'\r\n      return 'None'\r\n    },\r\n    redirectUriSource() {\r\n      if (this.configRedirectUri) return 'config.js'\r\n      if (this.envRedirectUri) return 'Environment Variable' \r\n      return 'None'\r\n    }\r\n  },\r\n  created() {\r\n    this.runTests()\r\n  },\r\n  methods: {\r\n    clientIdDisplay(id) {\r\n      if (!id) return 'Not set'\r\n      return id.substring(0, 4) + '...' + id.substring(id.length - 4)\r\n    },\r\n    goToLogin() {\r\n      this.$router.push('/login')\r\n    },\r\n    runTests() {\r\n      this.showAdvanced = true\r\n      this.diagnosticData = {\r\n        environment: {\r\n          nodeEnv: process.env.NODE_ENV,\r\n          baseUrl: process.env.BASE_URL,\r\n          window: typeof window !== 'undefined',\r\n          localStorage: typeof localStorage !== 'undefined'\r\n        },\r\n        spotify: {\r\n          configLoaded: typeof window.spotifyConfig !== 'undefined',\r\n          configClientId: this.clientIdDisplay(this.configClientId),\r\n          configClientIdSource: this.clientIdSource,\r\n          configRedirectUri: this.configRedirectUri,\r\n          envVarsAvailable: {\r\n            clientId: !!process.env.VUE_APP_SPOTIFY_CLIENT_ID,\r\n            clientSecret: !!process.env.VUE_APP_SPOTIFY_CLIENT_SECRET,\r\n            redirectUri: !!process.env.VUE_APP_REDIRECT_URI\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.diagnostics-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 100vh;\r\n  background-color: #121212;\r\n  color: white;\r\n  padding: 2rem 1rem;\r\n}\r\n\r\n.diagnostics-card {\r\n  background-color: #282828;\r\n  padding: 2rem;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);\r\n  width: 100%;\r\n  max-width: 800px;\r\n}\r\n\r\nh1 {\r\n  color: #1DB954;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\nh2 {\r\n  color: #b3b3b3;\r\n  margin-top: 1.5rem;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.status-block {\r\n  margin-bottom: 1.5rem;\r\n  padding-bottom: 1.5rem;\r\n  border-bottom: 1px solid #3e3e3e;\r\n}\r\n\r\n.status {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.status i {\r\n  margin-right: 0.5rem;\r\n  font-size: 1.5rem;\r\n}\r\n\r\n.status-ok i {\r\n  color: #1DB954;\r\n}\r\n\r\n.status-error i {\r\n  color: #ff4f4f;\r\n}\r\n\r\n.source {\r\n  margin-top: 0.5rem;\r\n  font-size: 0.9rem;\r\n  color: #b3b3b3;\r\n}\r\n\r\npre {\r\n  background-color: #1e1e1e;\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  overflow-x: auto;\r\n  white-space: pre-wrap;\r\n  word-wrap: break-word;\r\n  font-family: monospace;\r\n  margin: 1rem 0;\r\n}\r\n\r\ncode {\r\n  background-color: #1e1e1e;\r\n  padding: 2px 5px;\r\n  border-radius: 3px;\r\n  font-family: monospace;\r\n}\r\n\r\n.solutions {\r\n  margin-top: 2rem;\r\n  padding: 1.5rem;\r\n  background-color: #333333;\r\n  border-radius: 4px;\r\n}\r\n\r\n.solutions ol {\r\n  padding-left: 1.5rem;\r\n}\r\n\r\n.solutions li {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.actions {\r\n  display: flex;\r\n  gap: 1rem;\r\n  margin-top: 2rem;\r\n}\r\n\r\n.button {\r\n  background-color: #1DB954;\r\n  color: white;\r\n  border: none;\r\n  padding: 0.75rem 1.5rem;\r\n  border-radius: 30px;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.button:hover {\r\n  background-color: #1ed760;\r\n}\r\n\r\n.secondary {\r\n  background-color: #535353;\r\n}\r\n\r\n.secondary:hover {\r\n  background-color: #646464;\r\n}\r\n\r\n.advanced {\r\n  margin-top: 2rem;\r\n  padding-top: 2rem;\r\n  border-top: 1px solid #3e3e3e;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}