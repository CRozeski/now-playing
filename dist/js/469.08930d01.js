"use strict";(self["webpackChunknow_playing"]=self["webpackChunknow_playing"]||[]).push([[469],{3469:function(t,r,s){s.r(r),s.d(r,{default:function(){return b}});var e=s(6768),a=s(4232);const n={class:"now-playing-container"},o={key:0,class:"no-track"},i={key:1,class:"track-card"},c={class:"album-cover-container"},l=["src"],u={class:"track-info"},h={class:"artist"},p={class:"album"};function k(t,r,s,k,g,m){const v=(0,e.g2)("MusicPlayer");return(0,e.uX)(),(0,e.CE)("div",n,[m.currentTrack?((0,e.uX)(),(0,e.CE)("div",i,[(0,e.Lk)("div",c,[(0,e.Lk)("img",{src:m.currentTrack.album.images[0].url,alt:"Album Cover",class:"album-cover"},null,8,l)]),(0,e.Lk)("div",u,[(0,e.Lk)("h2",null,(0,a.v_)(m.currentTrack.name),1),(0,e.Lk)("p",h,(0,a.v_)(m.artistNames),1),(0,e.Lk)("p",p,(0,a.v_)(m.currentTrack.album.name),1)]),(0,e.bF)(v)])):((0,e.uX)(),(0,e.CE)("div",o,[r[1]||(r[1]=(0,e.Lk)("p",null,"No track currently playing",-1)),(0,e.Lk)("button",{onClick:r[0]||(r[0]=(...t)=>m.refreshTrack&&m.refreshTrack(...t)),class:"refresh-button"},"Refresh")]))])}s(8111),s(1701);const g={class:"player-controls"};function m(t,r,s,n,o,i){return(0,e.uX)(),(0,e.CE)("div",g,[(0,e.Lk)("button",{onClick:r[0]||(r[0]=(...t)=>i.previous&&i.previous(...t)),class:"control-button"},r[3]||(r[3]=[(0,e.Lk)("i",{class:"fas fa-step-backward"},null,-1)])),(0,e.Lk)("button",{onClick:r[1]||(r[1]=(...t)=>i.togglePlayPause&&i.togglePlayPause(...t)),class:"play-button"},[(0,e.Lk)("i",{class:(0,a.C4)(i.isPlaying?"fas fa-pause":"fas fa-play")},null,2)]),(0,e.Lk)("button",{onClick:r[2]||(r[2]=(...t)=>i.next&&i.next(...t)),class:"control-button"},r[4]||(r[4]=[(0,e.Lk)("i",{class:"fas fa-step-forward"},null,-1)]))])}var v={name:"MusicPlayer",computed:{isPlaying(){return this.$store.state.isPlaying}},methods:{async togglePlayPause(){if(this.$store.state.token)try{const t=this.isPlaying?"https://api.spotify.com/v1/me/player/pause":"https://api.spotify.com/v1/me/player/play",r=await fetch(t,{method:"PUT",headers:{Authorization:`Bearer ${this.$store.state.token}`}});204===r.status&&this.$store.commit("setIsPlaying",!this.isPlaying)}catch(t){console.error("Error toggling playback:",t)}},async previous(){if(this.$store.state.token)try{await fetch("https://api.spotify.com/v1/me/player/previous",{method:"POST",headers:{Authorization:`Bearer ${this.$store.state.token}`}}),setTimeout((()=>{this.$store.dispatch("fetchCurrentTrack")}),500)}catch(t){console.error("Error skipping to previous track:",t)}},async next(){if(this.$store.state.token)try{await fetch("https://api.spotify.com/v1/me/player/next",{method:"POST",headers:{Authorization:`Bearer ${this.$store.state.token}`}}),setTimeout((()=>{this.$store.dispatch("fetchCurrentTrack")}),500)}catch(t){console.error("Error skipping to next track:",t)}}}},y=s(1241);const f=(0,y.A)(v,[["render",m],["__scopeId","data-v-d39f6326"]]);var d=f,T={name:"NowPlaying",components:{MusicPlayer:d},data(){return{progressMs:0,progressInterval:null,pollingInterval:null,pollingFrequency:1e3}},computed:{currentTrack(){return this.$store.state.currentTrack},isPlaying(){return this.$store.state.isPlaying},artistNames(){return this.currentTrack?this.currentTrack.artists.map((t=>t.name)).join(", "):""},progressPercentage(){return this.currentTrack?this.progressMs/this.currentTrack.duration_ms*100:0}},methods:{formatTime(t){const r=Math.floor(t/1e3%60),s=Math.floor(t/6e4%60);return`${s}:${r<10?"0":""}${r}`},refreshTrack(){this.$store.dispatch("fetchCurrentTrack")},startProgressTimer(){this.progressInterval&&clearInterval(this.progressInterval),this.progressInterval=setInterval((()=>{this.isPlaying&&this.progressMs<this.currentTrack.duration_ms?this.progressMs+=1e3:this.progressMs>=this.currentTrack.duration_ms&&this.refreshTrack()}),1e3)}},created(){this.refreshTrack(),this.trackInterval=setInterval((()=>{this.refreshTrack()}),500)},watch:{currentTrack(t){t&&(this.progressMs=this.$store.state.progressMs||0,this.startProgressTimer())},isPlaying(t){t?this.startProgressTimer():this.progressInterval&&clearInterval(this.progressInterval)}},beforeUnmount(){this.progressInterval&&clearInterval(this.progressInterval),this.trackInterval&&clearInterval(this.trackInterval)}};const P=(0,y.A)(T,[["render",k],["__scopeId","data-v-22611bad"]]);var b=P}}]);
//# sourceMappingURL=469.08930d01.js.map